on: [push]

name: Test okteto actions log-level

jobs:

  devflow:
    runs-on: ubuntu-latest
    steps:
    - name: Context
      uses: okteto/context@latest
      with:
        url: ${{ secrets.OKTETO_URL }}
        token: ${{ secrets.OKTETO_TOKEN }}

    - name: "Okteto Deploy Preview Action"
      uses: okteto/deploy-preview@a0d66816a35be82253a73d46861a511a8ad61da9
      with:
        name: teresaromero-preview
        log-level: warn
    
    - name: "Okteto Create Namespace Action"
      uses: okteto/create-namespace@a232047526d8f5f5fee3342949ae2e63f4ff4d21
      with:
        namespace: teresaromero-action-ns
        log-level: warn

    - name: "Okteto Delete Namespace Action"
      uses: okteto/delete-namespace@73e1c6d272bf53f9f2271189d8eed04630b957b4
      with:
        namespace: teresaromero-action-ns
        log-level: warn
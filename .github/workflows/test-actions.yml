on: [push]

name: Test okteto actions log-level

jobs:

  devflow:
    runs-on: ubuntu-latest
    steps:
    - name: Context
      uses: okteto/context@latest
      with:
        url: ${{ secrets.OKTETO_URL }}
        token: ${{ secrets.OKTETO_TOKEN }}

    - name: "Okteto Deploy Preview Action"
      uses: okteto/deploy-preview@a0d66816a35be82253a73d46861a511a8ad61da9
      with:
        name: teresaromero-preview
        log-level: warn
    
    - name: "Okteto Destroy Preview Action"
      uses: okteto/destroy-preview@3f45e628352325d94d728e4207699c75b51340bc
      with:
        name: teresaromero-preview
        log-level: warn
    
    - name: "Okteto Create Namespace Action"
      uses: okteto/create-namespace@d420f34a7fea85baaf3d111b6b3a2477c102ad85
      with:
        namespace: teresaromero-action-ns
        log-level: warn

    - name: "Okteto Delete Namespace Action"
      uses: okteto/delete-namespace@73e1c6d272bf53f9f2271189d8eed04630b957b4
      with:
        namespace: teresaromero-action-ns
        log-level: warn
on: [push]

name: Deploy Preview with debug logs

jobs:

  devflow:
    runs-on: ubuntu-latest
    steps:
    - name: Context
      uses: okteto/context@latest
      with:
        url: ${{ secrets.OKTETO_URL }}
        token: ${{ secrets.OKTETO_TOKEN }}

    - name: "Okteto Deploy Preview Action"
      uses: okteto/deploy-preview@a0d66816a35be82253a73d46861a511a8ad61da9
      with:
        name: teresaromero-preview
        log-level: info
    
    - name: "Okteto Delete Namespace Action"
      uses: okteto/delete-namespace@73e1c6d272bf53f9f2271189d8eed04630b957b4
      with:
        namespace: teresaromero-namespace
        log-level: info